
---

# å‰è¨€

é…ç½®å¼€å‘ç¯å¢ƒ

> - Ubuntu:24.04
> - ros2:jazzy

# åˆ›å»ºåŸºç¡€ç¯å¢ƒ

1ã€åˆ›å»ºå®¹å™¨

![alt text](images/image.png)

![alt text](images/image-1.png)

2ã€å¯åŠ¨Mobaxtermè½¯ä»¶

![alt text](images/image-2.png)

# å®‰è£…ç›¸å…³çš„åº“

```shell
# æŒ‰ç…§é±¼é¦™rosä¸€é”®å®‰è£…å®Œæ•´çš„ros2:jazzy
sudo apt update
wget http://fishros.com/install -O fishros && bash fishros

# æ‰“å¼€æ–°çš„ç»ˆç«¯ï¼Œå®‰è£…gz
sudo apt-get update
sudo apt-get install curl lsb-release gnupg -y
sudo curl https://packages.osrfoundation.org/gazebo.gpg --output /usr/share/keyrings/pkgs-osrf-archive-keyring.gpg
echo "deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/pkgs-osrf-archive-keyring.gpg] http://packages.osrfoundation.org/gazebo/ubuntu-stable $(lsb_release -cs) main" | sudo tee /etc/apt/sources.list.d/gazebo-stable.list > /dev/null


sudo apt-get update -y
sudo apt-get install gz-harmonic -y

# å®‰è£…è¿œç¨‹æ˜¾ç¤ºæœåŠ¡ç¨‹åº
apt install x11-xserver-utils libxcb* -y

# å®‰è£…moveit
apt install ros-${ROS_DISTRO}-moveit* -y

# sudo apt-get update 
# sudo apt-get install -y ros-${ROS_DISTRO}-rmw-cyclonedds-cpp 
# export RMW_IMPLEMENTATION=rmw_cyclonedds_cpp
# export LIBGL_ALWAYS_SOFTWARE=1
# export GZ_SIM_SYSTEM_PLUGIN_PATH=/opt/ros/${ROS_DISTRO}/lib/
# # sudo apt install ros-${ROS_DISTRO}-gazebo-ros-pkgs ros-${ROS_DISTRO}-gazebo-ros2-control -y

# å®‰è£…ros2çš„æ§åˆ¶åŠŸèƒ½åŒ…
sudo apt install ros-${ROS_DISTRO}-controller-manager -y
sudo apt install ros-${ROS_DISTRO}-joint-trajectory-controller -y
sudo apt install ros-${ROS_DISTRO}-joint-state-broadcaster -y
sudo apt install ros-${ROS_DISTRO}-diff-drive-controller -y

# å®‰è£…å…¶ä»–åŠŸèƒ½åŒ…
apt install ros-${ROS_DISTRO}-ros-gz -y
apt-get install ros-${ROS_DISTRO}-joint-state-publisher-gui -y
apt install ros-${ROS_DISTRO}-moveit-ros-planning-interface -y
# apt install ros-jazzy-gz-ros2-control è¿™ä¸ªå¾ˆé‡è¦ https://github.com/ros-controls/gz_ros2_control
apt install ros-${ROS_DISTRO}-gz-ros2-control -y

# ç”¨äºè°ƒè¯•ï¼Œå¯ä¸å®‰è£…
apt-get install gdb -y

# å®‰è£…pythonç¬¬ä¸‰æ–¹åº“
# apt install python3-pip -y
# pip config set global.index-url https://pypi.tuna.tsinghua.edu.cn/simple
# pip install pyside6 xacro --break-system-packages
# # pip install pyside6 xacro ultralytics NodeGraphQt --break-system-packages
# pip install -U colcon-common-extensions vcstool --break-system-packages
pip install -r requirements.txt --break-system-packages
apt install python3-vcstool
sudo apt-get install dos2unix
```


# è¿è¡Œæµ‹è¯•

```shell
# Shell A
source install/setup.bash
ros2 launch panda_moveit_config gazebo_obb.launch.py

# Shell B è°ƒè¯•ç”¨ï¼Œåœ¨vscodeä¸­è¦å®‰è£…ROSï¼ˆMicrosoftï¼‰ã€Pythonç­‰æ¨¡å—ï¼Œè¿˜è¦åœ¨Pythonæ–‡ä»¶ä¸­é€‰æ‹©Pythonç¼–è¯‘å™¨
# source install/setup.bash
# ros2 launch panda_moveit_config arm_control.launch.py

# Shell C
source install/setup.bash
ros2 launch yolov8_obb yolov8_obb.launch.py

# Shell D
source install/setup.bash
cd src/ui_controller/
python3 main.py
```

# æŠ¥é”™

âŒ

```shell
[move_group-3] [ERROR] [1742286584.537923487] [move_group.moveit.moveit.core.time_optimal_trajectory_generation]: No acceleration limit was defined for joint panda_joint1! You have to define acceleration limits in the URDF or joint_limits.yaml
```

âœ”ï¸

è®¾ç½®å¥½åŠ é€Ÿåº¦


![alt text](images/image-3.png)

âŒ

```shell
[move_group-3] [ERROR] [1742286725.635634628] [move_group.moveit.moveit.ros.trajectory_execution_manager]: Unable to identify any set of controllers that can actuate the specified joints: [ panda_joint1 panda_joint2 panda_joint3 panda_joint4 panda_joint5 panda_joint6 panda_joint7 ]
[move_group-3] [ERROR] [1742286725.635688171] [move_group.moveit.moveit.ros.trajectory_execution_manager]: Known controllers and their joints:
[move_group-3] 
[move_group-3] [ERROR] [1742286725.635703240] [move_group.moveit.moveit.ros.plan_execution]: Apparently trajectory initialization failed
[move_group-3] [INFO] [1742286725.635767383] [move_group.moveit.moveit.ros.move_group.move_action]: CONTROL_FAILED
[rviz2-4] [INFO] [1742286725.636182552] [moveit_2565687607.moveit.ros.move_group_interface]: Plan and Execute request aborted
[rviz2-4] [ERROR] [1742286725.637270976] [moveit_2565687607.moveit.ros.move_group_interface]: MoveGroupInterface::move() failed or timeout reached
```

âœ”ï¸

![alt text](images/image-4.png)

```shell
action_ns: follow_joint_trajectory
default: true
```

âŒï¼šæ‰§è¡Œå¤¹å–çš„è¿‡ç¨‹ä¸­ï¼Œå¤¹çˆªæ‰“å¼€å’Œå…³é—­å¼‚å¸¸

```shell
[ERROR] [1742603349.012384448] [moveit_3836862178.moveit.ros.check_start_state_bounds]: Joint 'panda_finger_joint1' from the starting state is outside bounds by: [-6.61565e-14 ] should be in the range [0 ], [0.04 ].
[ERROR] [1742603349.012503158] [moveit_py]: PlanningRequestAdapter 'CheckStartStateBounds' failed, because 'Start state out of bounds.'. Aborting planning pipeline.
[ERROR] [1742603349.013678982] [moveit_py.pose_goal]: Planning failed
```

ğŸ¤”ï¼šèŒƒå›´è¶…äº†ï¼Œå¯¼è‡´`CheckStartStateBounds`ä¸é€šè¿‡

âœ”ï¸ï¼šè°ƒè¯•ä¸€ä¸‹åˆå§‹ä½ç½®

moveitè°ƒè¯•

![alt text](images/image-5.png)

âŒ
```shell
[yolov8_obb_publisher.py-1] /usr/bin/env: 'python3\r': No such file or directory
[yolov8_obb_publisher.py-1] /usr/bin/env: use -[v]S to pass options in shebang lines
```

âœ”ï¸
```shell
find ros2_project/src -type f -name "*.py" -print0 | xargs -0 dos2unix
```